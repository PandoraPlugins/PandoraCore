package dev.minecraftplugin.pandoracore.patch.patches.exploit;

import dev.minecraftplugin.pandoracore.PandoraCore;
import dev.minecraftplugin.pandoracore.patch.Patch;
import net.minecraft.server.v1_8_R3.Packet;
import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.Recipe;

import java.util.Iterator;

public class NoCraftQuillPatch extends Patch<Packet<?>> {
    public NoCraftQuillPatch() {
        super("NoCraftQuillPatch", "Stops crafting book and quills.", false,
                false, null, true);
    }

    @Override
    public void enable(PandoraCore core) {
        Iterator<Recipe> iterator = Bukkit.getServer().recipeIterator();
        while (iterator.hasNext()) {
            Recipe r = iterator.next();
            if (r.getResult().isSimilar(new ItemStack(Material.BOOK_AND_QUILL))) iterator.remove();
        }
    }

    @Override
    public void disable(PandoraCore core) {
    }
}
